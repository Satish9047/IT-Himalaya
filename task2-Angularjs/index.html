<!doctype html>
<html lang="en" ng-app="taskManager">
  <!-- ng-app is the directive -->
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Angular JS Task Manager</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <script 
    src="https://cdn.jsdelivr.net/npm/localforage@1.10.0/dist/localforage.min.js"></script>
    <script src="app\lib\angular.min.js"></script>
    <script src="app\tasks.js"></script>
    <script src="app\app.js"></script>
    <script src="app\utils.js"></script>
  </head>
  <body class="bg-body" ng-controller="TaskController">
    <!-- Header -->
    <header class="bg-primary mb-1">
      <div class="container p-2">
        <h2 class="fs-1 text-white">Task Manager</h2>
      </div>
    </header>

    <!-- Main -->
    <main class="container min-vh-100">
      <h2>Task</h2>

      <!-- Add Task -->
      <form
        ng-submit="addTask()"
        class="addTaskDiv d-flex flex-row justify-content-center gap-3 mb-3"
      >
        <!-- ng-model is use to bind the input value to the taskDescription -->
        <input
          type="text"
          id="taskDescription"
          ng-model="taskDescription"
          placeholder="Enter Task Description"
          class="form-control w-md-50 fs-5 shadow"
        />
        <button
          id="addTaskBtn"
          type="submit"
          class="btn btn-primary w-10 w-25 shadow"
        >
          Add Task
        </button>
      </form>
      <p>Task: {{taskDescription}}</p>
      <div class="taskList">
        <!-- Todo Task -->
        <div>
          <h3 class="fs-4">ToDo task</h3>
          <ol id="todoList" class="list-group">
            <li ng-repeat="task in tasks" class="bg-warning-subtle list-group-item shadow mb-3 rounded" ng-hide="task.completed">
              <p class="fs-5">{{task.description}}</p>
                <div class="taskDetails d-flex flex-column flex-md-row justify-content-between lh-1">
                  <div class="taskInfo">
                    <div class="info d-flex flex-column flex-md-row text-light-emphasis gap-md-3">
                      <p class="pb-md-0">createdAt: {{task.createdAt}}</p>
                      <p class ="pb-md-0">Due: {{task.dueDate}}</p>
                    </div>
                  </div>
                  <div class="taskEvents d-flex flex-row gap-2 gap-md-3">
                    <button class="btn btn-warning shadow" ng-click="deleteTask(task.id)">Delete</button>
                    <button class=" btn btn-primary shadow" ng-click="sendTaskToCompleted(task.id)">Completed</button>
                  </div>
            </li>
          </ol>
        </div>

        <!-- Completed Task -->
        <div>
          <h3 class="fs-4">Completed Task</h3>
          <ol id="completedList" class="list-group">
            <li class=" bg-dark-subtle  list-group-item shadow mb-3 rounded" ng-repeat="task in tasks" ng-show="task.completed">
              <p class="fs-5">{{task.description}}</p>
              <div class="taskDetails d-flex flex-column flex-md-row justify-content-between" >
                <div class="taskInfo">
                  <div class="info d-flex flex-column flex-md-row text-light-emphasis gap-md-3">
                    <p>CreatedAt:{{task.createdAt}}</p>
                    <p>Due:{{task.dueDate}}</p>
                    <p>CompletedAt:{{task.completedAt}}</p>
                  </div>
                </div>
                 <div class="taskEvents d-flex flex-row justify-content-end">
                  <button class="btn btn-warning shadow" ng-click="deleteTask(task.id)">Delete</button>
                </div>
              </div>
            </li>
          </ol>
        </div>
      </div>
    </main>
    <footer class="bg-warning">
      <div class="container text-center">
        <p>Satish Prajapati</p>
        <p>
          CopyRight Â© <span id="copyRightDate"></span>,Satish Prajapati, All
          rights Reserved
        </p>
      </div>
    </footer>
  </body>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"
  ></script>
</html>
