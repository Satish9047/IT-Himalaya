import{c as C,f as E}from"./chunk-SHQEBU6A.js";import{a as I,b as g,c as x,d as N,e as G,f as h,g as M,h as T,i as j,j as D}from"./chunk-5SU3YTSO.js";import{Ca as f,Ka as a,Ma as i,Na as n,Oa as v,Qa as w,Sa as r,Ua as y,c as S,lb as F,mb as b,pa as l,qa as c,rb as L,xa as _}from"./chunk-GM3PGS4F.js";function q(o,e){o&1&&(i(0,"span",11),r(1,"Email is Mandatory"),n())}function A(o,e){o&1&&(i(0,"span",11),r(1,"Invalid Email"),n())}function P(o,e){o&1&&(i(0,"span",11),r(1,"Password is Mandatory"),n())}function R(o,e){o&1&&(i(0,"span",11),r(1,"Password must be at least 8 characters"),n())}var U=class o{constructor(e,s,t){this.router=e;this.authService=s;this.userService=t}isLoading=!1;error=null;loginForm=new G({email:new h("",[g.required,g.email]),password:new h("",[g.required,g.minLength(8)])});login(){return S(this,null,function*(){this.isLoading=!0,console.log(this.loginForm.value);try{let e=yield this.authService.loginUser(this.loginForm.value);e.success&&e.data?(console.log(e.message),this.router.navigate(["/dashboard"]),this.userService.setUser(e.data)):(console.log(e.message),this.error=e.message)}catch(e){console.log(e.message),this.error=e.message}this.router.navigate(["/dashboard"]),this.isLoading=!1})}static \u0275fac=function(s){return new(s||o)(c(C),c(E),c(L))};static \u0275cmp=_({type:o,selectors:[["app-login"]],decls:22,vars:7,consts:[[1,"container","d-flex","justify-content-center","align-items-center","vh-100"],[1,"card","shadow-lg","p-4",2,"width","100%","max-width","500px"],[1,"text-center","mb-2"],["name","form",1,"row","g-3",3,"ngSubmit","formGroup"],["for","email",1,"form-label"],["type","email","id","email","name","email","placeholder","example@profiler.com","formControlName","email",1,"form-control"],["class","text-danger",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","name","password","placeholder","******","formControlName","password",1,"form-control"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-danger"]],template:function(s,t){if(s&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),r(3,"Login"),n(),i(4,"form",3),w("ngSubmit",function(){return t.login()}),i(5,"div")(6,"label",4),r(7,"Email"),n(),v(8,"input",5),i(9,"div"),f(10,q,2,0,"span",6)(11,A,2,0,"span",6),n()(),i(12,"div")(13,"label",7),r(14,"Password"),n(),v(15,"input",8),i(16,"div"),f(17,P,2,0,"span",6)(18,R,2,0,"span",6),n()(),i(19,"div",9)(20,"button",10),r(21),n()()()()()),s&2){let m,p,d,u;l(4),a("formGroup",t.loginForm),l(6),a("ngIf",((m=t.loginForm.get("email"))==null||m.errors==null?null:m.errors.required)&&((m=t.loginForm.get("email"))==null?null:m.touched)),l(),a("ngIf",((p=t.loginForm.get("email"))==null||p.errors==null?null:p.errors.email)&&((p=t.loginForm.get("email"))==null?null:p.touched)),l(6),a("ngIf",((d=t.loginForm.get("password"))==null||d.errors==null?null:d.errors.required)&&((d=t.loginForm.get("password"))==null?null:d.touched)),l(),a("ngIf",((u=t.loginForm.get("password"))==null||u.errors==null?null:u.errors.minlength)&&((u=t.loginForm.get("password"))==null?null:u.touched)),l(2),a("disabled",!t.loginForm.valid||t.isLoading),l(),y(" ",t.isLoading?"Loading...":"Login"," ")}},dependencies:[D,M,I,x,N,T,j,b,F],encapsulation:2})};export{U as LoginComponent};
